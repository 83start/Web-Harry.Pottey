window.onload=function(){function browserSniff(){var nVer=navigator.appVersion,nAgt=navigator.userAgent,browserName=navigator.appName,fullVersion=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10),nameOffset,verOffset,ix;return-1!==navigator.appVersion.indexOf("Windows NT")&&-1!==navigator.appVersion.indexOf("rv:11")?(browserName="IE",fullVersion="11;"):-1!==(verOffset=nAgt.indexOf("MSIE"))?(browserName="IE",fullVersion=nAgt.substring(verOffset+5)):-1!==(verOffset=nAgt.indexOf("Chrome"))?(browserName="Chrome",fullVersion=nAgt.substring(verOffset+7)):-1!==(verOffset=nAgt.indexOf("Safari"))?(browserName="Safari",fullVersion=nAgt.substring(verOffset+7),-1!==(verOffset=nAgt.indexOf("Version"))&&(fullVersion=nAgt.substring(verOffset+8))):-1!==(verOffset=nAgt.indexOf("Firefox"))?(browserName="Firefox",fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(browserName=nAgt.substring(nameOffset,verOffset),fullVersion=nAgt.substring(verOffset+1),browserName.toLowerCase()==browserName.toUpperCase()&&(browserName=navigator.appName)),-1!==(ix=fullVersion.indexOf(";"))&&(fullVersion=fullVersion.substring(0,ix)),-1!==(ix=fullVersion.indexOf(" "))&&(fullVersion=fullVersion.substring(0,ix)),majorVersion=parseInt(""+fullVersion,10),isNaN(majorVersion)&&(fullVersion=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10)),[browserName,majorVersion]}!function(){var regExp=function(name){return new RegExp("(^| )"+name+"( |$)")},forEach=function(list,fn,scope){for(var i=0;i<list.length;i++)fn.call(scope,list[i])};function ClassList(element){this.element=element}ClassList.prototype={add:function(){forEach(arguments,(function(name){this.contains(name)||(this.element.className+=" "+name)}),this)},remove:function(){forEach(arguments,(function(name){this.element.className=this.element.className.replace(regExp(name),"")}),this)},toggle:function(name){return this.contains(name)?(this.remove(name),!1):(this.add(name),!0)},contains:function(name){return regExp(name).test(this.element.className)},replace:function(oldName,newName){this.remove(oldName),this.add(newName)}},"classList"in Element.prototype||Object.defineProperty(Element.prototype,"classList",{get:function(){return new ClassList(this)}}),window.DOMTokenList&&null==DOMTokenList.prototype.replace&&(DOMTokenList.prototype.replace=ClassList.prototype.replace)}(),function(){if("function"==typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}();var obj={};obj.browserInfo=browserSniff(),obj.browserName=obj.browserInfo[0],obj.browserVersion=obj.browserInfo[1],wrapPlayers();var players=document.querySelectorAll(".ckin__player"),iconPlay='<i class="ckin-play"></i>',iconPause='<i class="ckin-pause"></i>',iconVolumeMute='<i class="ckin-volume-mute"></i>',iconVolumeMedium='<i class="ckin-volume-medium"></i>',iconVolumeLow='<i class="ckin-volume-low"></i>',iconExpand='<i class="ckin-expand"></i>',iconCompress='<i class="ckin-compress"></i>';function showControls(video){video.setAttribute("controls","controls")}function togglePlay(video,player){var method;video[video.paused?"play":"pause"](),video.paused?player.classList.remove("is-playing"):player.classList.add("is-playing")}function updateButton(video,toggle){var icon=video.paused?iconPlay:iconPause;toggle.forEach(button=>button.innerHTML=icon)}function skip(){video.currentTime+=parseFloat(this.dataset.skip)}function toggleVolume(video,volumeButton){var level=video.volume,icon=iconVolumeMedium;1==level?(level=0,icon=iconVolumeMute):.5==level?(level=1,icon=iconVolumeMedium):(level=.5,icon=iconVolumeLow),video.volume=level,volumeButton.innerHTML=icon}function handleRangeUpdate(){video[this.name]=this.value}function handleProgress(video,progressBar){var percent=video.currentTime/video.duration*100;progressBar.style.flexBasis=`${percent}%`}function scrub(e,video,progress){var scrubTime=e.offsetX/progress.offsetWidth*video.duration;video.currentTime=scrubTime}function wrapPlayers(){var videos;document.querySelectorAll("video").forEach(video=>{var wrapper=document.createElement("div");wrapper.classList.add("ckin__player"),video.parentNode.insertBefore(wrapper,video),wrapper.appendChild(video)})}function buildControls(skin){var html=[];return html.push('<button class="'+skin+'__button--big toggle" title="Toggle Play">'+iconPlay+"</button>"),html.push('<div class="'+skin+'__controls ckin__controls">'),html.push('<button class="'+skin+'__button toggle" title="Toggle Video">'+iconPlay+"</button>",'<div class="progress">','<div class="progress__filled"></div>',"</div>",'<button class="'+skin+'__button volume" title="Volume">'+iconVolumeMedium+"</button>",'<button class="'+skin+'__button fullscreen" title="Full Screen">'+iconExpand+"</button>"),html.push("</div>"),html.join("")}function attachSkin(skin){return void 0!==skin&&""!=skin?skin:"default"}function showTitle(skin,title){return void 0!==title&&""!=title&&'<div class="'+skin+'__title">'+title+"</div>"}function addOverlay(player,overlay){if(1==overlay)player.classList.add("ckin__overlay");else{if(2!=overlay)return;player.classList.add("ckin__overlay--2")}}function addColor(player,color){if(void 0!==color&&""!=color){var buttons=player.querySelectorAll("button"),progress;player.querySelector(".progress__filled").style.background=color,buttons.forEach(button=>button.style.color=color)}}function toggleFullScreen(player,fullScreenButton){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(player.classList.remove("ckin__fullscreen"),document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),isFullscreen=!1,fullScreenButton.innerHTML=iconExpand):(player.classList.add("ckin__fullscreen"),player.requestFullscreen?player.requestFullscreen():player.mozRequestFullScreen?player.mozRequestFullScreen():player.webkitRequestFullscreen?player.webkitRequestFullscreen():player.msRequestFullscreen&&player.msRequestFullscreen(),isFullscreen=!0,fullScreenButton.innerHTML=iconCompress)}function onFullScreen(e,player){var isFullscreenNow;null!==document.webkitFullscreenElement||(player.classList.remove("ckin__fullscreen"),player.querySelector(".fullscreen").innerHTML=iconExpand)}function addListenerMulti(element,eventNames,listener){for(var events=eventNames.split(" "),i=0,iLen=events.length;i<iLen;i++)element.addEventListener(events[i],listener,!1)}players.forEach(player=>{var video=player.querySelector("video"),skin=attachSkin(video.dataset.ckin);player.classList.add(skin);var overlay=video.dataset.overlay;addOverlay(player,overlay);var title=showTitle(skin,video.dataset.title);title&&player.insertAdjacentHTML("beforeend",title);var html=buildControls(skin);player.insertAdjacentHTML("beforeend",html);var color=video.dataset.color;addColor(player,color);var playerControls=player.querySelector("."+skin+"__controls"),progress=player.querySelector(".progress"),progressBar=player.querySelector(".progress__filled"),toggle=player.querySelectorAll(".toggle"),skipButtons=player.querySelectorAll("[data-skip]"),ranges=player.querySelectorAll("."+skin+"__slider"),volumeButton=player.querySelector(".volume"),fullScreenButton=player.querySelector(".fullscreen");"IE"!==obj.browserName||8!==obj.browserVersion&&9!==obj.browserVersion||(showControls(video),playerControls.style.display="none"),video.addEventListener("click",(function(){togglePlay(this,player)})),video.addEventListener("play",(function(){updateButton(this,toggle)})),video.addEventListener("pause",(function(){updateButton(this,toggle)})),video.addEventListener("timeupdate",(function(){handleProgress(this,progressBar)})),toggle.forEach(button=>button.addEventListener("click",(function(){togglePlay(video,player)}))),volumeButton.addEventListener("click",(function(){toggleVolume(video,volumeButton)}));let mousedown=!1;progress.addEventListener("click",(function(e){scrub(e,video,progress)})),progress.addEventListener("mousemove",e=>mousedown&&scrub(e,video,progress)),progress.addEventListener("mousedown",()=>mousedown=!0),progress.addEventListener("mouseup",()=>mousedown=!1),fullScreenButton.addEventListener("click",e=>toggleFullScreen(player,fullScreenButton)),addListenerMulti(player,"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",e=>onFullScreen(e,player))})};